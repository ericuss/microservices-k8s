version: '3.4'

services:
  etl:
    image: ${DOCKER_REGISTRY-}etl:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/ETL/Dockerfile
  web:
    image: ${DOCKER_REGISTRY-}websample:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/Web/Dockerfile
  shop-vue:
    image: ${DOCKER_REGISTRY-}shop-vue:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/Clients/lanreshop/Dockerfile
  webstatus:
    image: ${DOCKER_REGISTRY-}webstatus:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/WebStatus/Dockerfile
  bff:
    image: ${DOCKER_REGISTRY-}bff:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/BFFs/Lanre.Bffs.Web.Api/Dockerfile
  api-products:
    image: ${DOCKER_REGISTRY-}api-products:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/Apis/products/Lanre.Products.Host/Dockerfile
  api-stock:
    image: ${DOCKER_REGISTRY-}api-stock:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/Apis/stock/Lanre.Stock.Api/Dockerfile
  identity:
    image: ${DOCKER_REGISTRY-}lanre-identity:${TAG:-latest}
    build:
      context: .
      dockerfile: Src/Services/Lanre.IdentityServer/Dockerfile